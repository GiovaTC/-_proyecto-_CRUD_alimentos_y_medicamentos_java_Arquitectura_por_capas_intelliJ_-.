# -_proyecto-_CRUD_alimentos_y_medicamentos_java_Arquitectura_por_capas_intelliJ_-.
# README

<img width="1024" height="1024" alt="image" src="https://github.com/user-attachments/assets/a50c42c6-ef44-4eab-a63c-5d7e3584e736" />   

Proyecto: CRUD Alimentos y Medicamentos - Java (Arquitectura por capas) - IntelliJ :.

Descripción:
---------
Aplicación Java con arquitectura por capas (model, dao, service, ui) que permite gestionar (CRUD) registros de alimentos y medicamentos almacenados en una base de datos Oracle 19c . 
Interfaz gráfica con JavaFX:. .

Requisitos:
---------
- IntelliJ IDEA
- JDK 17+ (o 11+)
- Maven
- Oracle 19c y un esquema/usuario con privilegios
- Driver JDBC de Oracle (ojdbc) disponible en el classpath. Añádelo al repositorio local de Maven si es necesario .

Estructura del proyecto:
----------------------

```
crud-alimentos-medicamentos/
├─ pom.xml
├─ README.md
├─ sql/
│  ├─ schema.sql
│  └─ sample_inserts.sql
└─ src/main/java/com/example/crud/
   ├─ MainApp.java
   ├─ util/
   │  └─ DbUtil.java
   ├─ model/
   │  ├─ Alimento.java
   │  └─ Medicamento.java
   ├─ dao/
   │  ├─ GenericDAO.java
   │  ├─ AlimentoDAO.java
   │  ├─ MedicamentoDAO.java
   │  ├─ AlimentoDAOImpl.java
   │  └─ MedicamentoDAOImpl.java
   ├─ service/
   │  ├─ AlimentoService.java
   │  └─ MedicamentoService.java
   └─ ui/
     ├─ controllers/
     │  └─ MainController.java
     └─ views/
        └─ main.fxml
```

---

# pom.xml (Maven)

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.example</groupId>
  <artifactId>crud-alimentos-medicamentos</artifactId>
  <version>1.0-SNAPSHOT</version>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>17</maven.compiler.source>
    <maven.compiler.target>17</maven.compiler.target>
    <javafx.version>20</javafx.version>
  </properties>
  <dependencies>
    <!-- JavaFX modules (client must configure VM options for javafx modules when running) -->
    <dependency>
      <groupId>org.openjfx</groupId>
      <artifactId>javafx-controls</artifactId>
      <version>${javafx.version}</version>
    </dependency>
    <dependency>
      <groupId>org.openjfx</groupId>
      <artifactId>javafx-fxml</artifactId>
      <version>${javafx.version}</version>
    </dependency>

    <!-- JDBC: Oracle driver - if not available in Maven central, add manually to local repo -->
    <!-- Example placeholder - replace or install ojdbc jar manually in your local maven repo -->
    <!--
    <dependency>
      <groupId>com.oracle.database.jdbc</groupId>
      <artifactId>ojdbc8</artifactId>
      <version>19.8.0.0</version>
    </dependency>
    -->

    <!-- Logging (optional) -->
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
      <version>2.0.7</version>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.10.1</version>
      </plugin>
    </plugins>
  </build>
</project>
```

---

# SQL: schema.sql

```sql
CREATE TABLE ALIMENTOS (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NOMBRE VARCHAR2(200) NOT NULL,
  CATEGORIA VARCHAR2(100),
  FECHA_VENCIMIENTO DATE,
  STOCK NUMBER(10),
  OBSERVACIONES VARCHAR2(4000)
);

CREATE TABLE MEDICAMENTOS (
  ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  NOMBRE VARCHAR2(200) NOT NULL,
  PRINCIPIO_ACTIVO VARCHAR2(200),
  DOSIS VARCHAR2(100),
  FECHA_VENCIMIENTO DATE,
  STOCK NUMBER(10),
  OBSERVACIONES VARCHAR2(4000)
);

-- Usuario y permisos (ejecutar como DBA si es necesario)
-- CREATE USER app_user IDENTIFIED BY strong_password;
-- GRANT CONNECT, RESOURCE TO app_user;
-- GRANT CREATE SEQUENCE, CREATE TABLE TO app_user;
```

# sample_inserts.sql

```sql
INSERT INTO ALIMENTOS (NOMBRE, CATEGORIA, FECHA_VENCIMIENTO, STOCK, OBSERVACIONES) VALUES ('Arroz', 'Cereal', DATE '2026-05-01', 100, 'Paquete 1kg');
INSERT INTO ALIMENTOS (NOMBRE, CATEGORIA, FECHA_VENCIMIENTO, STOCK, OBSERVACIONES) VALUES ('Leche', 'Lácteo', DATE '2025-12-15', 50, 'UHT 1L');

INSERT INTO MEDICAMENTOS (NOMBRE, PRINCIPIO_ACTIVO, DOSIS, FECHA_VENCIMIENTO, STOCK, OBSERVACIONES) VALUES ('Paracetamol', 'Paracetamol', '500 mg', DATE '2026-02-01', 200, 'Tabletas');
INSERT INTO MEDICAMENTOS (NOMBRE, PRINCIPIO_ACTIVO, DOSIS, FECHA_VENCIMIENTO, STOCK, OBSERVACIONES) VALUES ('Ibuprofeno', 'Ibuprofeno', '400 mg', DATE '2025-11-30', 120, 'Tabletas');
COMMIT;
```

---

# Código fuente - principales archivos:

## src/main/java/com/example/crud/util/DbUtil.java
```java
package com.example.crud.util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.Properties;
import java.io.InputStream;

public class DbUtil {
    private static final String PROPS = "/db.properties";
    private static String url;
    private static String user;
    private static String password;

    static {
        try (InputStream is = DbUtil.class.getResourceAsStream(PROPS)) {
            Properties p = new Properties();
            p.load(is);
            url = p.getProperty("db.url");
            user = p.getProperty("db.user");
            password = p.getProperty("db.password");
            // Driver class for Oracle: optional since JDBC 4.0 auto-registers
            Class.forName(p.getProperty("db.driver"));
        } catch (Exception e) {
            throw new ExceptionInInitializerError(e);
        }
    }

    public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection(url, user, password);
    }
}
```

## src/main/resources/db.properties
```
db.driver=oracle.jdbc.OracleDriver
# URL de ejemplo: jdbc:oracle:thin:@//host:1521/service_name
db.url=jdbc:oracle:thin:@//localhost:1521/ORCLCDB
db.user=APP_USER
db.password=tu_password
```

## src/main/java/com/example/crud/model/Alimento.java
```java
package com.example.crud.model;

import java.time.LocalDate;

public class Alimento {
    private Long id;
    private String nombre;
    private String categoria;
    private LocalDate fechaVencimiento;
    private Integer stock;
    private String observaciones;

    // getters y setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    public String getNombre() { return nombre; }
    public void setNombre(String nombre) { this.nombre = nombre; }
    public String getCategoria() { return categoria; }
    public void setCategoria(String categoria) { this.categoria = categoria; }
    public LocalDate getFechaVencimiento() { return fechaVencimiento; }
    public void setFechaVencimiento(LocalDate fechaVencimiento) { this.fechaVencimiento = fechaVencimiento; }
    public Integer getStock() { return stock; }
    public void setStock(Integer stock) { this.stock = stock; }
    public String getObservaciones() { return observaciones; }
    public void setObservaciones(String observaciones) { this.observaciones = observaciones; }
}
```

## src/main/java/com/example/crud/model/Medicamento.java
```java
package com.example.crud.model;

import java.time.LocalDate;

public class Medicamento {
    private Long id;
    private String nombre;
    private String principioActivo;
    private String dosis;
    private LocalDate fechaVencimiento;
    private Integer stock;
    private String observaciones;

    // getters y setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    public String getNombre() { return nombre; }
    public void setNombre(String nombre) { this.nombre = nombre; }
    public String getPrincipioActivo() { return principioActivo; }
    public void setPrincipioActivo(String principioActivo) { this.principioActivo = principioActivo; }
    public String getDosis() { return dosis; }
    public void setDosis(String dosis) { this.dosis = dosis; }
    public LocalDate getFechaVencimiento() { return fechaVencimiento; }
    public void setFechaVencimiento(LocalDate fechaVencimiento) { this.fechaVencimiento = fechaVencimiento; }
    public Integer getStock() { return stock; }
    public void setStock(Integer stock) { this.stock = stock; }
    public String getObservaciones() { return observaciones; }
    public void setObservaciones(String observaciones) { this.observaciones = observaciones; }
}
```

## src/main/java/com/example/crud/dao/GenericDAO.java
```java
package com.example.crud.dao;
import java.util.List;
public interface GenericDAO<T> {
    T findById(Long id) throws Exception;
    List<T> findAll() throws Exception;
    void insert(T t) throws Exception;
    void update(T t) throws Exception;
    void delete(Long id) throws Exception;
}
```

## src/main/java/com/example/crud/dao/AlimentoDAO.java
```java
package com.example.crud.dao;
import com.example.crud.model.Alimento;
public interface AlimentoDAO extends GenericDAO<Alimento> { }
```

## src/main/java/com/example/crud/dao/MedicamentoDAO.java
```java
package com.example.crud.dao;
import com.example.crud.model.Medicamento;
public interface MedicamentoDAO extends GenericDAO<Medicamento> { }
```

## src/main/java/com/example/crud/dao/AlimentoDAOImpl.java
```java
package com.example.crud.dao;

import com.example.crud.model.Alimento;
import com.example.crud.util.DbUtil;

import java.sql.*;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;

public class AlimentoDAOImpl implements AlimentoDAO {
    @Override
    public Alimento findById(Long id) throws Exception {
        try (Connection c = DbUtil.getConnection();
             PreparedStatement ps = c.prepareStatement("SELECT * FROM ALIMENTOS WHERE ID = ?")) {
            ps.setLong(1, id);
            try (ResultSet rs = ps.executeQuery()) {
                if (rs.next()) return map(rs);
            }
        }
        return null;
    }

    @Override
    public List<Alimento> findAll() throws Exception {
        List<Alimento> list = new ArrayList<>();
        try (Connection c = DbUtil.getConnection();
             Statement s = c.createStatement();
             ResultSet rs = s.executeQuery("SELECT * FROM ALIMENTOS ORDER BY ID")) {
            while (rs.next()) list.add(map(rs));
        }
        return list;
    }

    @Override
    public void insert(Alimento a) throws Exception {
        String sql = "INSERT INTO ALIMENTOS (NOMBRE, CATEGORIA, FECHA_VENCIMIENTO, STOCK, OBSERVACIONES) VALUES (?,?,?,?,?)";
        try (Connection c = DbUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql)) {
            ps.setString(1, a.getNombre());
            ps.setString(2, a.getCategoria());
            ps.setDate(3, a.getFechaVencimiento() == null ? null : Date.valueOf(a.getFechaVencimiento()));
            ps.setObject(4, a.getStock(), Types.INTEGER);
            ps.setString(5, a.getObservaciones());
            ps.executeUpdate();
        }
    }

    @Override
    public void update(Alimento a) throws Exception {
        String sql = "UPDATE ALIMENTOS SET NOMBRE=?, CATEGORIA=?, FECHA_VENCIMIENTO=?, STOCK=?, OBSERVACIONES=? WHERE ID=?";
        try (Connection c = DbUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql)) {
            ps.setString(1, a.getNombre());
            ps.setString(2, a.getCategoria());
            ps.setDate(3, a.getFechaVencimiento() == null ? null : Date.valueOf(a.getFechaVencimiento()));
            ps.setObject(4, a.getStock(), Types.INTEGER);
            ps.setString(5, a.getObservaciones());
            ps.setLong(6, a.getId());
            ps.executeUpdate();
        }
    }

    @Override
    public void delete(Long id) throws Exception {
        try (Connection c = DbUtil.getConnection(); PreparedStatement ps = c.prepareStatement("DELETE FROM ALIMENTOS WHERE ID=?")) {
            ps.setLong(1, id);
            ps.executeUpdate();
        }
    }

    private Alimento map(ResultSet rs) throws SQLException {
        Alimento a = new Alimento();
        a.setId(rs.getLong("ID"));
        a.setNombre(rs.getString("NOMBRE"));
        a.setCategoria(rs.getString("CATEGORIA"));
        Date d = rs.getDate("FECHA_VENCIMIENTO");
        if (d != null) a.setFechaVencimiento(d.toLocalDate());
        a.setStock((Integer) rs.getObject("STOCK"));
        a.setObservaciones(rs.getString("OBSERVACIONES"));
        return a;
    }
}
```

## src/main/java/com/example/crud/dao/MedicamentoDAOImpl.java
```java
package com.example.crud.dao;

import com.example.crud.model.Medicamento;
import com.example.crud.util.DbUtil;

import java.sql.*;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;

public class MedicamentoDAOImpl implements MedicamentoDAO {
    @Override
    public Medicamento findById(Long id) throws Exception {
        try (Connection c = DbUtil.getConnection(); PreparedStatement ps = c.prepareStatement("SELECT * FROM MEDICAMENTOS WHERE ID = ?")) {
            ps.setLong(1, id);
            try (ResultSet rs = ps.executeQuery()) {
                if (rs.next()) return map(rs);
            }
        }
        return null;
    }

    @Override
    public List<Medicamento> findAll() throws Exception {
        List<Medicamento> list = new ArrayList<>();
        try (Connection c = DbUtil.getConnection(); Statement s = c.createStatement(); ResultSet rs = s.executeQuery("SELECT * FROM MEDICAMENTOS ORDER BY ID")) {
            while (rs.next()) list.add(map(rs));
        }
        return list;
    }

    @Override
    public void insert(Medicamento m) throws Exception {
        String sql = "INSERT INTO MEDICAMENTOS (NOMBRE, PRINCIPIO_ACTIVO, DOSIS, FECHA_VENCIMIENTO, STOCK, OBSERVACIONES) VALUES (?,?,?,?,?,?)";
        try (Connection c = DbUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql)) {
            ps.setString(1, m.getNombre());
            ps.setString(2, m.getPrincipioActivo());
            ps.setString(3, m.getDosis());
            ps.setDate(4, m.getFechaVencimiento() == null ? null : Date.valueOf(m.getFechaVencimiento()));
            ps.setObject(5, m.getStock(), Types.INTEGER);
            ps.setString(6, m.getObservaciones());
            ps.executeUpdate();
        }
    }

    @Override
    public void update(Medicamento m) throws Exception {
        String sql = "UPDATE MEDICAMENTOS SET NOMBRE=?, PRINCIPIO_ACTIVO=?, DOSIS=?, FECHA_VENCIMIENTO=?, STOCK=?, OBSERVACIONES=? WHERE ID=?";
        try (Connection c = DbUtil.getConnection(); PreparedStatement ps = c.prepareStatement(sql)) {
            ps.setString(1, m.getNombre());
            ps.setString(2, m.getPrincipioActivo());
            ps.setString(3, m.getDosis());
            ps.setDate(4, m.getFechaVencimiento() == null ? null : Date.valueOf(m.getFechaVencimiento()));
            ps.setObject(5, m.getStock(), Types.INTEGER);
            ps.setString(6, m.getObservaciones());
            ps.setLong(7, m.getId());
            ps.executeUpdate();
        }
    }

    @Override
    public void delete(Long id) throws Exception {
        try (Connection c = DbUtil.getConnection(); PreparedStatement ps = c.prepareStatement("DELETE FROM MEDICAMENTOS WHERE ID=?")) {
            ps.setLong(1, id);
            ps.executeUpdate();
        }
    }

    private Medicamento map(ResultSet rs) throws SQLException {
        Medicamento m = new Medicamento();
        m.setId(rs.getLong("ID"));
        m.setNombre(rs.getString("NOMBRE"));
        m.setPrincipioActivo(rs.getString("PRINCIPIO_ACTIVO"));
        m.setDosis(rs.getString("DOSIS"));
        Date d = rs.getDate("FECHA_VENCIMIENTO");
        if (d != null) m.setFechaVencimiento(d.toLocalDate());
        m.setStock((Integer) rs.getObject("STOCK"));
        m.setObservaciones(rs.getString("OBSERVACIONES"));
        return m;
    }
}
```

## src/main/java/com/example/crud/service/AlimentoService.java
```java
package com.example.crud.service;

import com.example.crud.dao.AlimentoDAO;
import com.example.crud.dao.AlimentoDAOImpl;
import com.example.crud.model.Alimento;

import java.util.List;

public class AlimentoService {
    private final AlimentoDAO dao = new AlimentoDAOImpl();

    public List<Alimento> listar() throws Exception { return dao.findAll(); }
    public Alimento obtener(Long id) throws Exception { return dao.findById(id); }
    public void crear(Alimento a) throws Exception { dao.insert(a); }
    public void actualizar(Alimento a) throws Exception { dao.update(a); }
    public void eliminar(Long id) throws Exception { dao.delete(id); }
}
```

## src/main/java/com/example/crud/service/MedicamentoService.java
```java
package com.example.crud.service;

import com.example.crud.dao.MedicamentoDAO;
import com.example.crud.dao.MedicamentoDAOImpl;
import com.example.crud.model.Medicamento;

import java.util.List;

public class MedicamentoService {
    private final MedicamentoDAO dao = new MedicamentoDAOImpl();

    public List<Medicamento> listar() throws Exception { return dao.findAll(); }
    public Medicamento obtener(Long id) throws Exception { return dao.findById(id); }
    public void crear(Medicamento m) throws Exception { dao.insert(m); }
    public void actualizar(Medicamento m) throws Exception { dao.update(m); }
    public void eliminar(Long id) throws Exception { dao.delete(id); }
}
```

## src/main/java/com/example/crud/ui/controllers/MainController.java
```java
package com.example.crud.ui.controllers;

import com.example.crud.model.Alimento;
import com.example.crud.model.Medicamento;
import com.example.crud.service.AlimentoService;
import com.example.crud.service.MedicamentoService;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.input.MouseEvent;

import java.time.LocalDate;

public class MainController {
    @FXML private TabPane tabPane;

    // Alimentos
    @FXML private TableView<Alimento> tableAlimentos;
    @FXML private TableColumn<Alimento, Long> colAlId;
    @FXML private TableColumn<Alimento, String> colAlNombre;
    @FXML private TextField tfAlNombre;
    @FXML private TextField tfAlCategoria;
    @FXML private DatePicker dpAlVenc;
    @FXML private TextField tfAlStock;
    @FXML private TextArea taAlObs;
    @FXML private Button btnAlGuardar, btnAlNuevo, btnAlEliminar;

    // Medicamentos
    @FXML private TableView<Medicamento> tableMedicamentos;
    @FXML private TableColumn<Medicamento, Long> colMedId;
    @FXML private TableColumn<Medicamento, String> colMedNombre;
    @FXML private TextField tfMedNombre;
    @FXML private TextField tfMedPrincipio;
    @FXML private TextField tfMedDosis;
    @FXML private DatePicker dpMedVenc;
    @FXML private TextField tfMedStock;
    @FXML private TextArea taMedObs;
    @FXML private Button btnMedGuardar, btnMedNuevo, btnMedEliminar;

    private final AlimentoService alimentoService = new AlimentoService();
    private final MedicamentoService medicamentoService = new MedicamentoService();

    private ObservableList<Alimento> alimentos = FXCollections.observableArrayList();
    private ObservableList<Medicamento> medicamentos = FXCollections.observableArrayList();

    @FXML
    public void initialize() {
        // configurar tablas
        colAlId.setCellValueFactory(new PropertyValueFactory<>("id"));
        colAlNombre.setCellValueFactory(new PropertyValueFactory<>("nombre"));
        colMedId.setCellValueFactory(new PropertyValueFactory<>("id"));
        colMedNombre.setCellValueFactory(new PropertyValueFactory<>("nombre"));

        loadAlimentos();
        loadMedicamentos();

        tableAlimentos.setOnMouseClicked((MouseEvent e) -> {
            Alimento sel = tableAlimentos.getSelectionModel().getSelectedItem();
            if (sel != null) populateAlimento(sel);
        });

        tableMedicamentos.setOnMouseClicked((MouseEvent e) -> {
            Medicamento sel = tableMedicamentos.getSelectionModel().getSelectedItem();
            if (sel != null) populateMedicamento(sel);
        });
    }

    private void loadAlimentos() {
        try {
            alimentos.setAll(alimentoService.listar());
            tableAlimentos.setItems(alimentos);
        } catch (Exception ex) {
            showError(ex);
        }
    }

    private void loadMedicamentos() {
        try {
            medicamentos.setAll(medicamentoService.listar());
            tableMedicamentos.setItems(medicamentos);
        } catch (Exception ex) {
            showError(ex);
        }
    }

    private void populateAlimento(Alimento a) {
        tfAlNombre.setText(a.getNombre());
        tfAlCategoria.setText(a.getCategoria());
        dpAlVenc.setValue(a.getFechaVencimiento());
        tfAlStock.setText(a.getStock() == null ? "" : a.getStock().toString());
        taAlObs.setText(a.getObservaciones());
        btnAlGuardar.setUserData(a);
    }

    private void populateMedicamento(Medicamento m) {
        tfMedNombre.setText(m.getNombre());
        tfMedPrincipio.setText(m.getPrincipioActivo());
        tfMedDosis.setText(m.getDosis());
        dpMedVenc.setValue(m.getFechaVencimiento());
        tfMedStock.setText(m.getStock() == null ? "" : m.getStock().toString());
        taMedObs.setText(m.getObservaciones());
        btnMedGuardar.setUserData(m);
    }

    @FXML
    private void onAlNuevo() {
        tfAlNombre.clear(); tfAlCategoria.clear(); dpAlVenc.setValue(null); tfAlStock.clear(); taAlObs.clear();
        btnAlGuardar.setUserData(null);
    }

    @FXML
    private void onAlGuardar() {
        try {
            Alimento a = (Alimento) btnAlGuardar.getUserData();
            if (a == null) a = new Alimento();
            a.setNombre(tfAlNombre.getText());
            a.setCategoria(tfAlCategoria.getText());
            a.setFechaVencimiento(dpAlVenc.getValue());
            a.setStock(tfAlStock.getText().isEmpty() ? null : Integer.parseInt(tfAlStock.getText()));
            a.setObservaciones(taAlObs.getText());
            if (a.getId() == null) alimentoService.crear(a); else alimentoService.actualizar(a);
            loadAlimentos();
            onAlNuevo();
        } catch (Exception ex) { showError(ex); }
    }

    @FXML
    private void onAlEliminar() {
        Alimento sel = tableAlimentos.getSelectionModel().getSelectedItem();
        if (sel == null) return;
        try { alimentoService.eliminar(sel.getId()); loadAlimentos(); } catch (Exception ex) { showError(ex); }
    }

    @FXML
    private void onMedNuevo() {
        tfMedNombre.clear(); tfMedPrincipio.clear(); tfMedDosis.clear(); dpMedVenc.setValue(null); tfMedStock.clear(); taMedObs.clear();
        btnMedGuardar.setUserData(null);
    }

    @FXML
    private void onMedGuardar() {
        try {
            Medicamento m = (Medicamento) btnMedGuardar.getUserData();
            if (m == null) m = new Medicamento();
            m.setNombre(tfMedNombre.getText());
            m.setPrincipioActivo(tfMedPrincipio.getText());
            m.setDosis(tfMedDosis.getText());
            m.setFechaVencimiento(dpMedVenc.getValue());
            m.setStock(tfMedStock.getText().isEmpty() ? null : Integer.parseInt(tfMedStock.getText()));
            m.setObservaciones(taMedObs.getText());
            if (m.getId() == null) medicamentoService.crear(m); else medicamentoService.actualizar(m);
            loadMedicamentos();
            onMedNuevo();
        } catch (Exception ex) { showError(ex); }
    }

    @FXML
    private void onMedEliminar() {
        Medicamento sel = tableMedicamentos.getSelectionModel().getSelectedItem();
        if (sel == null) return;
        try { medicamentoService.eliminar(sel.getId()); loadMedicamentos(); } catch (Exception ex) { showError(ex); }
    }

    private void showError(Exception ex) {
        Alert a = new Alert(Alert.AlertType.ERROR);
        a.setHeaderText("Error");
        a.setContentText(ex.getMessage());
        a.showAndWait();
    }
}
```

## src/main/resources/com/example/crud/ui/views/main.fxml
```xml
<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="com.example.crud.ui.controllers.MainController">
  <center>
    <TabPane fx:id="tabPane">
      <tabs>
        <Tab text="Alimentos">
          <content>
            <VBox spacing="8" padding="10">
              <TableView fx:id="tableAlimentos" prefHeight="200">
                <columns>
                  <TableColumn fx:id="colAlId" text="ID" />
                  <TableColumn fx:id="colAlNombre" text="Nombre" />
                </columns>
              </TableView>
              <GridPane hgap="8" vgap="8">
                <columnConstraints>
                  <ColumnConstraints percentWidth="25"/>
                  <ColumnConstraints percentWidth="75"/>
                </columnConstraints>
                <Label text="Nombre:" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                <TextField fx:id="tfAlNombre" GridPane.rowIndex="0" GridPane.columnIndex="1" />
                <Label text="Categoria:" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                <TextField fx:id="tfAlCategoria" GridPane.rowIndex="1" GridPane.columnIndex="1" />
                <Label text="Vencimiento:" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                <DatePicker fx:id="dpAlVenc" GridPane.rowIndex="2" GridPane.columnIndex="1" />
                <Label text="Stock:" GridPane.rowIndex="3" GridPane.columnIndex="0" />
                <TextField fx:id="tfAlStock" GridPane.rowIndex="3" GridPane.columnIndex="1" />
                <Label text="Observaciones:" GridPane.rowIndex="4" GridPane.columnIndex="0" />
                <TextArea fx:id="taAlObs" GridPane.rowIndex="4" GridPane.columnIndex="1" />
              </GridPane>
              <HBox spacing="8">
                <Button text="Nuevo" fx:id="btnAlNuevo" onAction="#onAlNuevo" />
                <Button text="Guardar" fx:id="btnAlGuardar" onAction="#onAlGuardar" />
                <Button text="Eliminar" fx:id="btnAlEliminar" onAction="#onAlEliminar" />
              </HBox>
            </VBox>
          </content>
        </Tab>
        <Tab text="Medicamentos">
          <content>
            <VBox spacing="8" padding="10">
              <TableView fx:id="tableMedicamentos" prefHeight="200">
                <columns>
                  <TableColumn fx:id="colMedId" text="ID" />
                  <TableColumn fx:id="colMedNombre" text="Nombre" />
                </columns>
              </TableView>
              <GridPane hgap="8" vgap="8">
                <columnConstraints>
                  <ColumnConstraints percentWidth="25"/>
                  <ColumnConstraints percentWidth="75"/>
                </columnConstraints>
                <Label text="Nombre:" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                <TextField fx:id="tfMedNombre" GridPane.rowIndex="0" GridPane.columnIndex="1" />
                <Label text="Principio activo:" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                <TextField fx:id="tfMedPrincipio" GridPane.rowIndex="1" GridPane.columnIndex="1" />
                <Label text="Dosis:" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                <TextField fx:id="tfMedDosis" GridPane.rowIndex="2" GridPane.columnIndex="1" />
                <Label text="Vencimiento:" GridPane.rowIndex="3" GridPane.columnIndex="0" />
                <DatePicker fx:id="dpMedVenc" GridPane.rowIndex="3" GridPane.columnIndex="1" />
                <Label text="Stock:" GridPane.rowIndex="4" GridPane.columnIndex="0" />
                <TextField fx:id="tfMedStock" GridPane.rowIndex="4" GridPane.columnIndex="1" />
                <Label text="Observaciones:" GridPane.rowIndex="5" GridPane.columnIndex="0" />
                <TextArea fx:id="taMedObs" GridPane.rowIndex="5" GridPane.columnIndex="1" />
              </GridPane>
              <HBox spacing="8">
                <Button text="Nuevo" fx:id="btnMedNuevo" onAction="#onMedNuevo" />
                <Button text="Guardar" fx:id="btnMedGuardar" onAction="#onMedGuardar" />
                <Button text="Eliminar" fx:id="btnMedEliminar" onAction="#onMedEliminar" />
              </HBox>
            </VBox>
          </content>
        </Tab>
      </tabs>
    </TabPane>
  </center>
</BorderPane>
```

## src/main/java/com/example/crud/MainApp.java
```java
package com.example.crud;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.scene.image.Image;
import javafx.stage.Stage;

public class MainApp extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        FXMLLoader fxml = new FXMLLoader(getClass().getResource("/com/example/crud/ui/views/main.fxml"));
        Scene scene = new Scene(fxml.load(), 900, 600);
        stage.setTitle("Gestión Alimentos y Medicamentos");
        // stage.getIcons().add(new Image(getClass().getResourceAsStream("/icon.png")));
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch();
    }
}
```

---

# Notas de despliegue y ajustes:

1. Añade el JAR del driver JDBC de Oracle (ojdbc8.jar) a tu repositorio local de Maven o como dependencia del proyecto en IntelliJ .
2. Ajusta `db.properties` con tu URL, usuario y contraseña .
3. Ejecuta `sql/schema.sql` y luego `sql/sample_inserts.sql` en tu base de datos Oracle .
4. Corre la aplicación desde la clase `com.example.crud.MainApp`. Si usas JavaFX 11+, añade VM options al ejecutar: `--module-path /path/to/javafx-sdk/lib --add-modules javafx.controls,javafx.fxml` si usas SDK local; con dependencias Maven suele funcionar según tu configuración .

---

# Siguientes mejoras (opcional)
- Añadir validaciones UI (campos obligatorios, formatos numéricos) y mensajes de ayuda .
- Paginación y filtros por categoría / vencimiento .
- Exportar a Excel / PDF .
- Autenticación de usuarios :. .

---  
